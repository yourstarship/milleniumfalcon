package gal.cor.persistence.dao.impl;

import gal.cor.persistence.dao.apis.IDaoPersonne;
import gal.cor.persistence.entities.Client;
import gal.cor.persistence.entities.Personne;

<<<<<<< HEAD
import java.util.ArrayList;
import java.util.List;

import javax.ejb.Stateless;
import javax.persistence.EntityManager;
import javax.persistence.PersistenceContext;
import javax.persistence.Query;
=======
import java.util.Collection;
import java.util.List;
import java.util.Map;

public class DaoPersonneImpl  implements IDaoPersonne {
>>>>>>> origin

import org.apache.log4j.Logger;

@Stateless
public class DaoPersonneImpl implements IDaoPersonne {

	Logger log = Logger.getLogger(DaoPersonneImpl.class);
	
	@PersistenceContext(name="YourStarshipPersistence")
	private EntityManager em;
	
	@Override
	public void creerPersonne(Personne t) {
<<<<<<< HEAD
		//Le nom est stockÃ© en majuscule
		t.setNom(t.getNom().toUpperCase());
		em.persist(t);		
=======
		// TODO Auto-generated method stub
		
>>>>>>> origin
	}

	@Override
	public void supprimerPersonne(Personne t) {
<<<<<<< HEAD
		em.remove(t);
=======
		// TODO Auto-generated method stub
		
>>>>>>> origin
	}

	@Override
	public Personne mettreAjourPersonne(Personne t) {
<<<<<<< HEAD
		return em.merge(t);
=======
		// TODO Auto-generated method stub
		return null;
>>>>>>> origin
	}

	@Override
	public Personne rechercherParId(Personne t) {
<<<<<<< HEAD
		return em.find(Personne.class, t.getId());
=======
		// TODO Auto-generated method stub
		return null;
	}

	@Override
	public List<Personne> rechercherParRequeteNommee(String requeteNommee) {
		// TODO Auto-generated method stub
		return null;
	}

	@Override
	public List<Personne> rechercherParRequeteNommee(String requeteNommee,
			Map<String, Object> parametres, int nbreMaxElements) {
		// TODO Auto-generated method stub
		return null;
	}

	@Override
	public List<Personne> rechercherParRequeteNommee(String requeteNommee,
			Map<String, Object> parametres) {
		// TODO Auto-generated method stub
		return null;
	}

	@Override
	public List<Personne> rechercherParRequeteNommee(String requeteNommee,
			int nbreMaxElements) {
		// TODO Auto-generated method stub
		return null;
>>>>>>> origin
	}
	
	@SuppressWarnings("unchecked")
	@Override
<<<<<<< HEAD
	public List<Personne> rechercherParNom(String nom) {
		String request= "SELECT p FROM Personne p WHERE p.nom = :param";
		Query query = em.createQuery(request);
		query.setParameter("param", nom.toUpperCase());
		List<Personne>liste =new ArrayList<Personne>();
		liste = (List<Personne>)query.getResultList();
		return liste;
	}

	@SuppressWarnings("unchecked")
	@Override
	public Personne rechercherParEmail(String email) {
		Personne personne = null;
		String request= "SELECT p FROM Personne p WHERE p.nom = :param1";
		Query query = em.createQuery(request);
		query.setParameter("param1", email);
		List<Personne> liste = new ArrayList<Personne>();		
		liste = (List<Personne>)query.getResultList();
		if (liste.size() == 1) {
			personne = liste.get(0);
			log.info("Client.rechercherParEmail la requete retourne le personne : " + personne);
		} else if (liste.size() > 1) {
			personne = liste.get(0);
			log.warn("Client.rechercherParEmail la requete retourne plus d'un client, on utilise : " + personne);
		}
		return personne;
	}
	
	@SuppressWarnings("unchecked")
	@Override
	public List<Personne> obtenirTousPersonne() {
		String request= "SELECT p FROM Personne p";
		Query query = em.createQuery(request);
		List<Personne>liste =new ArrayList<Personne>();
		liste = (List<Personne>)query.getResultList();
		return liste;
	}
=======
	public Collection<Personne> obtenirTousPersonne() {
		// TODO Auto-generated method stub
		return null;
	}

	
>>>>>>> origin
}
